## 02 리팩터링 원칙
================

### 2.1 리팩터링 정의

> **리팩터링** : [명사] 소포트웨어의 겉보기 동작은 그대로 유지한 채, 코드를 이해하고 수정하기 쉽도록 내부 구조를 변경하는 기법

수많은 사람이 코드를 정리하는 작업을 모조리 '리팩터링'이라고 표현하고 있는데, 앞에서 제시한 정의를 따르면 특정한 방식에 따라 코드를 정리하는 것만이 리팩터링이다.

리팩터링의 목적은 코드를 이해하고 수정하기 쉽게 만드는 것이다. 프로그램의 성능은 좋아질 수도, 나빠질 수도 있다.

### 2.2 두개의 모자

소프트웨어를 개발할 때 목적이 '기능 추가'냐, 아니면 '리팩터링'이냐를 명확히 구분해 작업한다.

기능을 추가할 때는 '기능 추가'모자를 쓴 다음 기존 코드는 건드리지 않고 새 기능을 추가하기만 한다.

리팩터링할 때는 '리팩터링'모자를 쓴 다음 기능 추가는 절대 하지 않기로 다짐한 뒤 오로지 코드 재구성에만 전념한다.

### 2.3 리랙터링하는 이유

**리팩터링하면 소프트웨어 설계가 좋아진다**

중복 코드를 제거하면 모든 코드가 언제나 고유한 일을 수행함을 보장할 수 있으며, 이는 바람직한 설계의 핵심이다.

**리팩터링하면 소프트웨어를 이해하기 쉬워진다**

리팩터링은 코드가 더 잘 읽히게 도와준다. 코드의 목적이 더 잘 드러나게, 내 의도를 더 명확하게 전달하도록 개선할 수 있다.

다른 사람뿐만 아니라 나 자신도 이해하기 쉽게 만들어준다.

**리팩터링하면 버그를 쉽게 찾을 수 있다**

코드를 이해하기 쉽다는 말은 버그를 찾기 쉽다는 말이기도 하다.

프로그램의 구조를 명확하게 다듬으면 그냥 '이럴 것이다'라고 가정하던 점들이 분명히 드러나는데, 버그를 지나치려야 지나칠 수 없을 정도까지 명확해진다.

**리팩터링하면 프로그래밍 속도를 높일 수 있다**

개발 초기에는 느릴 수 있지만 새로운 기능을 추가할수록 내부 설계가 잘된 소프트웨어는 새로은 기능을 추가할 지점과 어떻게 고칠지를 쉽게 찾을 수 있다.

리팩터링하면 기존 코드의 설계를 얼마든지 개선할 수 있으므로, 설령 프로그램 요구사항이 바뀌더라도 설계를 지속해서 개선할 수 있다.

### 2.4 언제 리팩터링해야 할까?

> **3의 법칙**
> 1. 처음에는 그냥 한다.
> 2. 비슷한 일을 두 번째로 하게 되면(중복이 생겼다는 사실), 일단 계속 진행한다.
> 3. 비슷한 일을 세 번째 하게 되면 리팩터링한다.
> 야구를 좋아하는 사람은 '스트라이크 세번이면 리팩터링하라(삼진 리팩터링)'로 기억하자.

**준비를 위한 리팩터링: 기능을 쉽게 추가하게 만들기**

리팩터링하기 가장 좋은 시점은 코드베이스에 기능을 새로 추가하기 직전이다.
